# 手動確認シナリオ集

## 事前準備

1. `pnpm install`
2. `pnpm db:up` で PostgreSQL コンテナを起動。
3. `pnpm prisma:migrate dev` を実行し、最新スキーマを適用。
4. `pnpm dev` で Next.js アプリを起動する（必要に応じて別ターミナルで `pnpm dev:server`）。

ブラウザから `http://localhost:3000` にアクセスし、以下の観点を確認する。

## 共通レイアウト確認

1. ページの構成が「上部（ヘッダー）」「左側（サイドメニュー）」「右側（コンテンツ）」に分かれていること。
2. 画面上部ヘッダーに左アイコン＋タイトル「業務管理ダッシュボード」が表示されること。
3. 画面上部ヘッダー右側にログインユーザー名（デフォルト: 管理者 太郎）とログアウトボタンが表示されること。
4. 左サイドメニューに「ユーザー管理」「施設マスタ」のメニューが表示され、選択ページに応じてハイライトが切り替わること。
5. 画面幅が狭い場合はヘッダー左のメニューアイコン（ハンバーガー）を押すとサイドメニューがドロワー表示され、再度押すと閉じられること。メニュー選択で自動的にドロワーが閉じること。
6. メニューをクリックすると右側のコンテンツエリアが該当画面に切り替わること。

## 機能一覧・詳細仕様

- ユーザー管理  
  - CRUD、バリデーション、モーダルレイアウトなどの詳細は「[ユーザー画面仕様書](./user-screen-spec.md)」「[ユーザー画面テスト仕様書](./user-screen-test-spec.md)」を参照。
- 施設マスタ管理  
  - CRUD、無効化処理、入力項目の仕様は「[施設マスタ画面仕様書](./facility-screen-spec.md)」「[施設マスタ画面テスト仕様書](./facility-screen-test-spec.md)」を参照。

### マスタ画面共通方針

1. 画面は「上部: 検索エリア」「下部: 一覧表」で構成し、一覧表はページング付きで表示する。
2. 一覧表には検索条件に応じた CSV ダウンロード機能を提供する。
3. 登録・編集画面はダイアログで表示し、項目は縦一列に並べる。
4. ダイアログのタイトル行と操作ボタン行は固定し、入力領域のみスクロールできるようにする。

### テスト概要

- バックエンドユースケース: `tests/backend` 配下の Vitest で User / Facility のユースケースを検証（重複チェック、論理削除など）。
- フロントエンドコンポーネント: `tests/frontend` で React Testing Library によりダイアログ入出力やモックされた tRPC 呼び出しを確認。
- E2E: `tests/e2e` の Playwright でユーザー CRUD を実ブラウザ操作として確認。施設マスタの E2E は今後追加予定。
- 詳細なシナリオは各テスト仕様書（ユーザー／施設）を参照。

## 終了処理

1. `pnpm db:down` で DB コンテナを停止（必要に応じて）。
2. 不具合や改善点があれば `docs/project-plan.md` を更新し、AI エージェントに共有する。
